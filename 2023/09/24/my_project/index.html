<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>科研经历简介 | XDU微积冯</title><meta name="author" content="weiji-Feng"><meta name="copyright" content="weiji-Feng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="关于大学三年科研经历的总结">
<meta property="og:type" content="article">
<meta property="og:title" content="科研经历简介">
<meta property="og:url" content="https://weiji-feng.github.io/2023/09/24/my_project/index.html">
<meta property="og:site_name" content="XDU微积冯">
<meta property="og:description" content="关于大学三年科研经历的总结">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.postimg.cc/7LPvy8PV/guimie.png">
<meta property="article:published_time" content="2023-09-24T06:02:37.000Z">
<meta property="article:modified_time" content="2023-09-24T07:35:46.177Z">
<meta property="article:author" content="weiji-Feng">
<meta property="article:tag" content="myself">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.postimg.cc/7LPvy8PV/guimie.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://weiji-feng.github.io/2023/09/24/my_project/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '科研经历简介',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-24 15:35:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/starlight.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4098087_izllhdh31rn.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/resume/cv_zh.pdf"><i class="fa-fw fa fa-graduation-cap"></i><span> 简历</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-lock"></i><span> 暗格</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.postimg.cc/7LPvy8PV/guimie.png')"><nav id="nav"><span id="blog-info"><a href="/" title="XDU微积冯"><span class="site-name">XDU微积冯</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/resume/cv_zh.pdf"><i class="fa-fw fa fa-graduation-cap"></i><span> 简历</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-lock"></i><span> 暗格</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">科研经历简介</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-09-24T06:02:37.000Z" title="发表于 2023-09-24 14:02:37">2023-09-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-24T07:35:46.177Z" title="更新于 2023-09-24 15:35:46">2023-09-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/myself/">myself</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="科研经历简介"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="个人科研经历总结"><a href="#个人科研经历总结" class="headerlink" title="个人科研经历总结"></a>个人科研经历总结</h1><h2 id="1-FacTool-Factuality-Detection-in-Generative-AI"><a href="#1-FacTool-Factuality-Detection-in-Generative-AI" class="headerlink" title="1. FacTool: Factuality Detection in Generative AI"></a>1. FacTool: Factuality Detection in Generative AI</h2><p>论文所在地址：<a target="_blank" rel="noopener" href="https://ethanc111.github.io/factool_website/">https://ethanc111.github.io/factool_website/</a></p>
<p>这个应该是我大学生涯里真正开始参与的第一个科研项目，方向是对<u>生成式AI的事实性检测</u>(factuality/hallucinations)。像ChatGPT这样的LLMs可以生成各种类型的response(QA/code generation/math reasoning/scientific review)，但是它们却经常会编造事实，给人们带来困扰。本工作主要针对以下4种常见场景设计了检测方案，并将该工具集成到LLMs中进行实时的检测：</p>
<ul>
<li><code>knowledge-based QA</code>: Factool detects factual errors in knowledge-based QA.</li>
<li><code>code generation</code>: Factool detects execution errors in code generation.</li>
<li><code>mathematical reasoning</code>: Factool detects calculation errors in mathematical reasoning.</li>
<li><code>scientific literature review</code>: Factool detects hallucinated scientific literatures.</li>
</ul>
<p>下面我以自己主要参与的<code>scientific literature review</code>模块为例，阐述一下FacTool的原理。</p>
<h3 id="1-1-如何实现事实性检测"><a href="#1-1-如何实现事实性检测" class="headerlink" title="1.1 如何实现事实性检测"></a>1.1 如何实现事实性检测</h3><p>论文中提到实现该工具需要五个step：</p>
<ol>
<li>claim extraction</li>
<li>query generation</li>
<li>tool querying</li>
<li>evidence collection</li>
<li>agreement verification</li>
</ol>
<p>本质上其实只需2个prompt和特定的附加工具：</p>
<h4 id="prompt-1：提取claim"><a href="#prompt-1：提取claim" class="headerlink" title="prompt 1：提取claim"></a>prompt 1：提取claim</h4><p>即从一段scientific literature review中提取出引用到的论文(claim)，每篇提取出来的论文必须包含<code>(paper title, year, author)</code>三个属性。我们只需要一个prompt即可实现：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scientific:</span></span><br><span class="line">  <span class="attr">system:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    You are a brilliant assistant.</span></span><br><span class="line"><span class="string"></span>  <span class="attr">user:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    You are given a piece of text that mentions some scientfic literature. Your task is to accurately find all papers mentioned in the text and identify the title, author(s), and publication year for each paper.</span></span><br><span class="line"><span class="string">    The response should be a list of dictionaries, with each dictionary having keys &quot;paper_title&quot;, &quot;paper_author(s)&quot;, and &quot;paper_pub_year&quot;, which correspond to the title of the paper, the authors of the paper, and the publication year of the paper.</span></span><br><span class="line"><span class="string">    Please note that only papers that include both title, author, and year of publication in the text are eligible. Papers that lack a title or author or publication date are not allowed to appear in the response.</span></span><br><span class="line"><span class="string">    The following is the given text</span></span><br><span class="line"><span class="string">    [text]: &#123;input&#125;</span></span><br><span class="line"><span class="string">    You should only respond in format as described below (i.e., a list of dictionaries). Remember not to repeat papers in each response. Papers that lack a title or author or publication date are not allowed to appear in the response. If the paper title is empty, please ignore the paper. DO NOT RESPOND WITH ANYTHING ELSE. DO NOT RESPONSE TO DUPLICATE CONTENT.</span></span><br><span class="line"><span class="string">    [response format]: </span></span><br><span class="line"><span class="string">    [</span></span><br><span class="line"><span class="string">      &#123;&#123;</span></span><br><span class="line"><span class="string">        &quot;paper_title&quot;: &quot;Title of the paper(you can write &quot;&#x27; &#x27;&quot; if there are no titles).&quot;,</span></span><br><span class="line"><span class="string">        &quot;paper_author(s)&quot;: &quot;Author(s) of the paper(you can write &quot;&#x27; &#x27;&quot; if there are no authors).&quot;,</span></span><br><span class="line"><span class="string">        &quot;paper_pub_year&quot;: &quot;Year of the paper published(you can write &quot;&#x27; &#x27;&quot; if there are no years).&quot;</span></span><br><span class="line"><span class="string">      &#125;&#125;,</span></span><br><span class="line"><span class="string">      ...</span></span><br><span class="line"><span class="string">    ]</span></span><br></pre></td></tr></table></figure><br>下面给出一个样例，看看ChatGPT通过该prompt生成的内容：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;input_review&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The current state-of-the-art deep learning algorithms for natural language processing include transformer-based models such as BERT (Devlin et al., 2018), GPT-2 (Radford et al., 2019), and T5 (Raffel et al., 2019). These models have achieved state-of-the-art performance on various NLP tasks such as question answering, language translation, and text generation.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;output_claims&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;paper_title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;paper_author(s)&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jacob Devlin, Ming-Wei Chang, Kenton Lee, Kristina Toutanova&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;paper_pub_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2018&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;paper_title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Language Models are Unsupervised Multitask Learners&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;paper_author(s)&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Alec Radford, Jeffrey Wu, Rewon Child, David Luan, Dario Amodei, Ilya Sutskever&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;paper_pub_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2019&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;paper_title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Exploring the Limits of Transfer Learning with a Unified Text-to-Text Transformer&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;paper_author(s)&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, Peter J. Liu&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;paper_pub_year&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2019&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="tool-1：querying-使用工具采集证据"><a href="#tool-1：querying-使用工具采集证据" class="headerlink" title="tool 1：querying - 使用工具采集证据"></a>tool 1：querying - 使用工具采集证据</h4><p>这一步比较简单，我们可以通过<code>Google Scholar</code>实现证据采集。</p>
<ul>
<li>input：文章题目</li>
<li>output：google scholar页面第一个检索结果的题目、年份、作者信息。</li>
</ul>
<p>这里直接给出实现代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">google_scholar</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self, query</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;query: the extracted title of the paper&quot;&quot;&quot;</span></span><br><span class="line">        results = scholarly.search_pubs(query)</span><br><span class="line">        paper_info = <span class="built_in">next</span>(results)</span><br><span class="line">        paper_info_subset = &#123;key: paper_info[<span class="string">&#x27;bib&#x27;</span>][key] <span class="keyword">for</span> key <span class="keyword">in</span> [<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;author&#x27;</span>, <span class="string">&#x27;pub_year&#x27;</span>]&#125;</span><br><span class="line">        <span class="keyword">return</span> paper_info_subset</span><br></pre></td></tr></table></figure></p>
<p>我们只需要把上一个步骤中提取出的paper信息(仅需要title)传入google scholar，通过比较output的搜索结果和提取出的信息之间的差异，就能判断真实性。</p>
<h4 id="prompt-2：对方法的评估"><a href="#prompt-2：对方法的评估" class="headerlink" title="prompt 2：对方法的评估"></a>prompt 2：对方法的评估</h4><p>由于我们需要测试和评估FactTool的性能，所以必须拥有测试数据集。下面是2段prompt，分别要求GPT完成情景生成(即要求生成一个scientific question)和情景问题回答(完全无错、包含一个错误并提取出这个错误)。通过该方式最终可以获得一个包含多个领域的review数据集。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scientific:</span></span><br><span class="line">  <span class="attr">prompt_generation:</span></span><br><span class="line">    <span class="attr">system:</span> <span class="string">|- </span></span><br><span class="line"><span class="string">      You are a brilliant assistant.</span></span><br><span class="line"><span class="string"></span>    <span class="attr">user:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      Can you give me 20 prompts that ask to generate content that includes citing relevant scientific papers? The prompts should cover &#123;computer science, medicine, law, business, physics&#125;. The prompt should specify that When citing relevant papers, please include the name of the papers, the author(s) of the papers, and the publication year.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">  <span class="attr">response_generation:</span></span><br><span class="line">    <span class="attr">system:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      You are a brilliant assistant.</span></span><br><span class="line"><span class="string"></span>    <span class="attr">user:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      Answer the given scientific question with exactly one reference error (i.e., contain a hallucinated scientific paper) so that my students can debug that error.</span></span><br><span class="line"><span class="string">      Your answer concise and in full sentence(s).</span></span><br><span class="line"><span class="string">      The response must be a dictionary with keys &quot;answer_without_error&quot;, &quot;answer_with_one_hallucinated_scientific_paper&quot;, and &quot;error&quot;, which correspond to the correct answer without error, the answer with one reference error, and the error itself.</span></span><br><span class="line"><span class="string">      The following is the given question</span></span><br><span class="line"><span class="string">      [question]: &#123;input&#125;</span></span><br><span class="line"><span class="string">      The format of papers introduced in &quot;answer_without_error&quot; should be: a study by [author name](year of publication) titled &#x27;[paper title]&#x27;. You must only respond in format as described below. DO NOT RESPONSE TO PAPERS WHOSE AUTHOR NAMES CONTAIN THE FOLLOWING WORDS: &quot;Jane&quot;, &quot;John&quot;, &quot;Doe&quot;, &quot;Smith&quot;. DO NOT RETURN ANYTHING ELSE. ADDING ANY EXTRA NOTES OR COMMENTS THAT DON&#x27;T FOLLOW THE RESPONSE FORMAT IS ALSO PROHIBITED.</span></span><br><span class="line"><span class="string">      [response format]: </span></span><br><span class="line"><span class="string">      &#123;&#123;</span></span><br><span class="line"><span class="string">        &quot;answer_without_error&quot;: &quot;Answer without error. Ensure that the answer is highly factual. REMEMBER RESPONSE MUST INCLUDES THE TITLE OF THE PAPER ENCLOSED IN QUOTATION MARKS. Answer in full sentence(s).&quot;,</span></span><br><span class="line"><span class="string">        &quot;answer_with_one_hallucinated_scientific_paper&quot;: &quot;Answer with one reference error (i.e., contains a hallucinated scientific paper). Answer in full sentence(s). Make sure the hallucinated scientfic paper is convincing and not randomly generated.&quot;,</span></span><br><span class="line"><span class="string">        &quot;error&quot;: &quot;The error itself.&quot;</span></span><br><span class="line"><span class="string">      &#125;&#125;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>针对一个领域的事实性检测基本都按照上述过程完成。这个方法虽然可以高精确度地完成事实性检测，但由于一般性略有不足，导致目前只能在4个领域展开检测。最近第一作者还在提高检测的泛化能力。</p>
<h2 id="2-LLM-for-Math-reasoning"><a href="#2-LLM-for-Math-reasoning" class="headerlink" title="2. LLM for Math reasoning"></a>2. LLM for Math reasoning</h2><p>例如GPT-4这样的大语言模型已经依靠其出色的语义理解能力和强大的上下文记忆，在很多NLP任务中展示出了强大的能力。但由于LLM的预训练使用的是大量互联网数据，并没能在数学相关任务中展现出亮眼的表现，其数学推理能力较差。我总结了一下其中的几个原因：</p>
<ol>
<li>推理思路混乱：对于复杂的数学推理任务，其找不到推理出发点或步骤跳跃；</li>
<li>运算能力较差：经常出现数学运算错误（乘除开方等），导致错误随推理深入不断放大；</li>
<li>数据格式混乱：现有的数学相关数据（如GSM8K，MATH，MultiArith等）格式不一，而LLM对于不同格式数据体现出的理解能力有很多不同。</li>
</ol>
<p>我们工作针对这些问题，采用了以下方法：</p>
<ol>
<li>Chain-of-thought：由于思维链的使用通常能显著提高LLM的逻辑推理能力，我们在微调过程中沿用了这个方法，使用的每个数据集都有step-by-step的求解过程；</li>
<li>Supervised fine-tuning：由于LLM在数学知识储备上有所不足，所以我们通过使用sft方法，直接改进模型在数学知识上的不足；</li>
<li>Adding out-domain datasets：为了增强LLM在数学运算、常识逻辑上的能力，我们引入多个相关数据集，期望这些领域的知识可以间接提升其在数学上的推理能力；</li>
<li>reformat：将所有数据标注成相同的格式，有助于模型的统一理解。</li>
</ol>
<p>值得强调的是，多篇论文指出<u><strong>模型的能力与训练数据的数据量呈对数级的正相关</strong></u>，所以我们在加入以上4种方法的基础上还同时引入多种数据增强方法，使数据不仅数量众多，并且有效。下面，我们详细介绍一下本工作的内容。</p>
<h3 id="1-In-domain-dataset"><a href="#1-In-domain-dataset" class="headerlink" title="1. In-domain dataset"></a>1. In-domain dataset</h3><p>即领域内相关数据集。它的组成如下：</p>
<h4 id="train-set-of-the-benchmarks"><a href="#train-set-of-the-benchmarks" class="headerlink" title="train set of the benchmarks"></a>train set of the benchmarks</h4><p>即领域内数据集的训练集，最常见的就是GSM8K和MATH数据集，使用这些数据的训练集可以使得LLM在这些数据集的评估中表现出色。</p>
<h4 id="data-augmentation-by-GPT-4"><a href="#data-augmentation-by-GPT-4" class="headerlink" title="data augmentation by GPT-4"></a>data augmentation by GPT-4</h4><p>例如GSM8K的训练集仅有7473条数据，数据量较小，我们还需要通过GPT-4去造新的题目，我们可采用两种方法：</p>
<ol>
<li><p>参数化法：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;base&quot;</span><span class="punctuation">:</span> <span class="string">&quot;In a school, there are 120 students. The number of boys is 4 times the number of girls. How many boys and girls are there in the school?&quot;</span></span><br><span class="line"><span class="attr">&quot;param&quot;</span><span class="punctuation">:</span> <span class="string">&quot;In a school, there are $x$ students. The number of boys is $y$ times the number of girls. How many boys and girls are there in the school?&quot;</span></span><br></pre></td></tr></table></figure>
<p>通过对上述参数化题目中的<script type="math/tex">x</script>和<script type="math/tex">y</script>赋值，我们就能获得更多的增强数据。</p>
</li>
<li><p>情景制造法：</p>
</li>
</ol>
<p>即通过few-shot，通过从原数据集中sample出一些题目，给GPT-4提供样例，让其生成新的、同类型的题目。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;prompt&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;1&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Weng earns $12 an hour for babysitting. Yesterday, she just did 50 minutes of babysitting. How much did she earn?&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;2&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Randy has 60 mango trees on his farm. He also has 5 less than half as many coconut trees as mango trees. How many trees does Randy have in all on his farm?&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;3&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Joy can read 8 pages of a book in 20 minutes. How many hours will it take her to read 120 pages?&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">=&gt; GPT<span class="number">-4</span></span><br><span class="line"><span class="attr">&quot;response&quot;</span><span class="punctuation">:</span> <span class="string">&quot;In a school, there are 120 students. The number of boys is 4 times the number of girls. How many boys and girls are there in the school?&quot;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="reject-sampling"><a href="#reject-sampling" class="headerlink" title="reject sampling"></a>reject sampling</h4><p>我们知道，针对同一道题可能会有多种解题思路，如果在微调中只给出一个正确答案，难免会限制LLM的“思维”。</p>
<p>reject sampling方法使用sft微调完(即只是用训练集初步微调)的模型，让其回答K次，收集其中答案正确且推理步骤不同的数据组成新的增强数据，继续微调。这样做的好处有：</p>
<ol>
<li>生成的数据是模型自身生成的，使得数据更贴近模型的输出概率分布；</li>
<li>生成多个推理路径，有助于提升模型的推理思维。<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Julie is reading a 120-page book. Yesterday, she was able to read 12 pages and today, she read twice as many pages as yesterday. If she wants to read half of the remaining pages tomorrow, how many pages should she read?&quot;</span></span><br><span class="line"><span class="attr">&quot;answer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Maila read 12 x 2 = &lt;&lt;12*2=24&gt;&gt;24 pages today.\nSo she was able to read a total of 12 + 24 = &lt;&lt;12+24=36&gt;&gt;36 pages since yesterday.\nThere are 120 - 36 = &lt;&lt;120-36=84&gt;&gt;84 pages left to be read.\nSince she wants to read half of the remaining pages tomorrow, then she should read 84/2 = &lt;&lt;84/2=42&gt;&gt;42 pages.\n#### 42&quot;</span></span><br><span class="line"></span><br><span class="line">=&gt; sampled by sfted model itself.</span><br><span class="line"><span class="attr">&quot;new_answer_1&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The number of pages that Julie read today is 12 x 2 = &lt;&lt;12*2=24&gt;&gt;24.\nSo, the total number of pages that she read yesterday and today is 12 + 24 = &lt;&lt;12+24=36&gt;&gt;36.\nThus, the total number of remaining pages is 120 - 36 = &lt;&lt;120-36=84&gt;&gt;84.\nSince she wants to read half of the remaining pages tomorrow, then she should read 84/2 = &lt;&lt;84/2=42&gt;&gt;42 pages.\n#### 42&quot;</span></span><br><span class="line"><span class="attr">&quot;new_answer_2&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Since today is the 3rd day, then Julie read a total of 12 + 24 = &lt;&lt;12+24=36&gt;&gt;36 pages for the first two days.\nJulie&#x27;s total number of pages left to read is 120 - 36 = &lt;&lt;120-36=84&gt;&gt;84 pages.\nSo, she needs to read 84/2 = &lt;&lt;84/2=42&gt;&gt;42 pages tomorrow to read half of the remaining pages.\n#### 42&quot;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="Evol-Instruct"><a href="#Evol-Instruct" class="headerlink" title="Evol-Instruct"></a>Evol-Instruct</h4><p>这个方法来源于Wizard-Math论文，通过对推理数据的复杂度(难度)和涉猎广度进行修改而让数据涉及更广泛的情况。其主要策略有：</p>
<ol>
<li>Downward evolution：降低题目难度。包括将复杂的题分解为简单的题、生成一个其他主题的简单的新问题；</li>
<li>Upward evolution：升高题目难度。包括增加限制条件、增加推理步骤等。</li>
</ol>
<h4 id="reformat"><a href="#reformat" class="headerlink" title="reformat"></a>reformat</h4><p>即把推理过程的格式修改为一种容易让LLM理解和应用的格式。例如：在第一步复述和总结题目的要求；给每个step前加一个序号，如“1.”表示第一步；在所有步骤结束后提示“[[Final solution]]”表示“综上所述”。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Natalia sold clips to 48 of her friends in April, and then she sold half as many clips in May. How many clips did Natalia sell altogether in April and May?&quot;</span></span><br><span class="line"><span class="attr">&quot;base_answer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Natalia sold 48/2 = &lt;&lt;48/2=24&gt;&gt;24 clips in May.\nNatalia sold 48+24 = &lt;&lt;48+24=72&gt;&gt;72 clips altogether in April and May.\n#### 72&quot;</span></span><br><span class="line"></span><br><span class="line">=&gt; reformat</span><br><span class="line"><span class="attr">&quot;reformat_answer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1. The problem states that Natalia sold clips to 48 of her friends in April, and then she sold half as many clips in May. We need to find out how many clips Natalia sold altogether in April and May.\n2. By problem, Natalia sold 48 clips in April.\n3. By problem, Natalia sold half as many clips in May as she did in April. Since she sold 48 clips in April, she sold 48/2 = &lt;&lt;48/2=24&gt;&gt; = 24 clips in May.\n4. To find out how many clips Natalia sold altogether in April and May, we need to add the number of clips sold in April and May together. By steps 2 and 3, Natalia sold 48 clips in April + 24 clips in May = &lt;&lt;48+24=72&gt;&gt; = 72 clips altogether in April and May.\n5. [Final solution] Thus, Natalia sold 72 clips altogether in April and May. #### 72&quot;</span></span><br></pre></td></tr></table></figure><br>reformat过程可以通过few-shot GPT-4即可实现。</p>
<h3 id="2-Out-domain-dataset"><a href="#2-Out-domain-dataset" class="headerlink" title="2. Out-domain dataset"></a>2. Out-domain dataset</h3><p>这一部分就是通过借助与推理能力间接相关的数据集，例如：多位数的运算题、与推理有关的其他数据集等。下面简单地列举几个使用的数据：</p>
<ol>
<li><p>arithmetic算术题</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;63405533102770 + 119761662&quot;</span><span class="punctuation">,</span> </span><br><span class="line">  <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;63405652864432&quot;</span><span class="punctuation">,</span> </span><br><span class="line">  <span class="attr">&quot;answer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;63405533102770 + 119761662 = 63405652864432&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>IMO竞赛题</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;idx&quot;</span><span class="punctuation">:</span> <span class="number">96</span><span class="punctuation">,</span> <span class="attr">&quot;year&quot;</span><span class="punctuation">:</span> <span class="number">2018</span><span class="punctuation">,</span> <span class="attr">&quot;competition&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMO shortlist&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;algebra&quot;</span><span class="punctuation">,</span> <span class="string">&quot;combinatorics&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> </span><br><span class="line">  <span class="attr">&quot;question&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Let $\\mathbb&#123;Q&#125;_&#123;&gt;0&#125;$ denote the set of all positive rational numbers. Determine all functions $f:\\mathbb&#123;Q&#125;_&#123;&gt;0&#125;\\to \\mathbb&#123;Q&#125;_&#123;&gt;0&#125;$ satisfying $$f(x^2f(y)^2)=f(x)^2f(y)$$for all $x,y\\in\\mathbb&#123;Q&#125;_&#123;&gt;0&#125;$&quot;</span><span class="punctuation">,</span> </span><br><span class="line">  <span class="attr">&quot;answer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$f(x)=1,  \\forall x\\in \\mathbb&#123;Q^+&#125;$$P(x,y) \\rightarrow f(x^&#123;2&#125;f(y)^2)=f(x)^&#123;2&#125;f(y) $$P(1,x) \\rightarrow f(f(x)^2)=f(1)^&#123;2&#125;f(x)...(A)$$P(\\displaystyle \\frac&#123;x&#125;&#123;f(x^2)&#125;,x^2) \\rightarrow f(x^2)=f(\\frac&#123;x&#125;&#123;f(x^2)&#125;)^&#123;2&#125;f(x^2)$ $\\Rightarrow  f(\\displaystyle \\frac&#123;x&#125;&#123;f(x^2)&#125;)=1$$\\exists c\\in \\mathbb&#123;Q^+&#125;$ such that $f(c)=1$$P(x,c) \\rightarrow f(x^2)=f(x)^2$$P(x,y^2) \\rightarrow f(xf(y)^2)^2=f(x)^&#123;2&#125;f(y)^&#123;2&#125;$ $\\Rightarrow f(xf(y)^2)=f(x)f(y) ... (1)$In (1) let $x=1$ and we obtain $f(f(y)^2)=f(1)f(y)...(B)$Combining (A) and (B) yields $f(1)=1$So $f(f(x)^2)= f(f(x))^2= f(x)$ $\\Rightarrow f^k(x)=\\sqrt[k]&#123;f(x)&#125;$ where $k$ is a power of $2$.Suppose that for some $a\\in \\mathbb&#123;Q^+&#125;$ such that $f(a)\\neq 1$ let $f(a)=\\displaystyle \\frac&#123;m&#125;&#123;n&#125;$ such that $\\gcd(m,n)=1$Let $k$ be a power of $2$ with $V_&#123;p&#125;(m)&lt;k \\wedge V_&#123;p&#125;(n)&lt;k$ for all primes $p$.$f^k(a)=\\sqrt[k]&#123;f(a)&#125;$ so $\\sqrt[k]&#123;f(a)&#125; \\in \\mathbb&#123;Q^+&#125;$Let $\\sqrt[k]&#123;\\displaystyle\\frac&#123;m&#125;&#123;n&#125;&#125;=\\displaystyle\\frac&#123;x&#125;&#123;y&#125;$ for some $x,y \\in \\mathbb&#123;N&#125;$ with $\\gcd(x,y)=1$$my^k=nx^k$ if $p \\mid m \\Rightarrow p \\mid x$$V_&#123;p&#125;(my^k)=V_&#123;p&#125;(nx^k)$ Since $\\gcd(x,y)=1$ $V_&#123;p&#125;(y)=0$$V_&#123;p&#125;(my^k)=V_&#123;p&#125;(m)=V_&#123;p&#125;(x^k)=k \\cdot V_&#123;p&#125;(x) \\geq k$ this is clearly a contradiction and thus there doesn&#x27;t exist any positive rational number $a$ with $f(a)\\neq 1$.&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>khan etc.</p>
</li>
</ol>
<h3 id="3-Reward-Model"><a href="#3-Reward-Model" class="headerlink" title="3. Reward Model"></a>3. Reward Model</h3><p>我们知道，由于LLM生成回答实际上是对概率模型进行采样，所以如果我们将<code>temperature</code>参数变大，我们就可以获得自由度更高的回复，这样我们多次采样，可能会获得不同的生成结果。</p>
<p>怎样的生成结果是好的呢？下面是常见的几种评判方法：</p>
<ol>
<li>greedy decode：<code>temperature=0.0</code>，采样1次，得到唯一的解码结果。该方法可以获得固定的回答。</li>
<li>majority voting：<code>temperature=0.7</code>，采样K次进行投票，票选次数最高的结果（出现次数最高的解）被认为是最终答案，是greedy decode的一般情况；</li>
<li>reward model，建立一个新的评价模型，让其去选择最佳的回答。</li>
</ol>
<p><img src="/2023/09/24/my_project/2.png" alt></p>
<p>而reward model被认为是效果更好的一种评估策略。所以如何有效训练一个reward model是人们所关心的。Open-AI提出一个<code>Process-supervised Reward Models</code>，通过给每一个步骤进行打分，并整合所有步骤的分数为该回答的总得分。这种方法能细粒度地检测每个步骤是否出现问题，能监控推理出错的时机。</p>
<p>该方法如何训练？需要人工标注如下数据。</p>
<p><img src="/2023/09/24/my_project/1.png" alt></p>
<h2 id="3-Image2Poem"><a href="#3-Image2Poem" class="headerlink" title="3. Image2Poem"></a>3. Image2Poem</h2><p>这是我本科阶段独立开展的第一个项目。图像生成古诗(Image to Poem)，旨在为给定的图像自动生成符合图像内容的古诗句。</p>
<p>使用对比学习预训练的CLIP模型拥有良好的迁移应用和zero-shot能力，是打通图像-文本多模态的重要模型之一。 本项目使用<a target="_blank" rel="noopener" href="https://github.com/openai/CLIP">CLIP模型</a>生成古诗意象关键词向量和图像向量。</p>
<p>初始版本的生成方法为：搜集一个古诗词意象关键词数据集(close-set)，然后通过text-encoder(图1.右) 生成对应的关键词向量。对给定的一张图像，同样通过Image-encoder即可得到图像向量。比较图像向量和每个关键词向量的余弦相似度，可以得到top-k个相关关键词。将关键词送入语言模型，自动生成一首诗。<br><img src="/2023/09/24/my_project/4.png" alt><br>不过我们的理想是实现一阶段端到端的生成，如下图所示：<br><img src="https://github.com/weiji-Feng/Image2Poem/raw/main/datasets/images/ourwork.png" alt></p>
<p>我的初步构思是借鉴BLIP2的Q-Former框架，如下图所示<br><img src="/2023/09/24/my_project/3.png" alt></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://weiji-feng.github.io">weiji-Feng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://weiji-feng.github.io/2023/09/24/my_project/">https://weiji-feng.github.io/2023/09/24/my_project/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://weiji-feng.github.io" target="_blank">XDU微积冯</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/myself/">myself</a></div><div class="post_share"><div class="social-share" data-image="https://i.postimg.cc/7LPvy8PV/guimie.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/07/20/PPO/" title="Proximal Policy Optimization(PPO)"><img class="cover" src="https://i.postimg.cc/fyDqYY3v/shaonv.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Proximal Policy Optimization(PPO)</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">weiji-Feng</div><div class="author-info__description">数学鬼才</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/weiji-Feng"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/weiji-Feng" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/khfeng@stu.xidian.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.zhihu.com/people/wan-shi-sheng-yi-lx" target="_blank" title="知乎"><i class="iconfont icon-shejiaotubiao-10"></i></a><a class="social-icon" href="https://blog.csdn.net/FKH20009200446?type=blog" target="_blank" title="CSDN"><i class="iconfont icon-csdn"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E7%A7%91%E7%A0%94%E7%BB%8F%E5%8E%86%E6%80%BB%E7%BB%93"><span class="toc-number">1.</span> <span class="toc-text">个人科研经历总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-FacTool-Factuality-Detection-in-Generative-AI"><span class="toc-number">1.1.</span> <span class="toc-text">1. FacTool: Factuality Detection in Generative AI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%BA%8B%E5%AE%9E%E6%80%A7%E6%A3%80%E6%B5%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 如何实现事实性检测</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#prompt-1%EF%BC%9A%E6%8F%90%E5%8F%96claim"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">prompt 1：提取claim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tool-1%EF%BC%9Aquerying-%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E9%87%87%E9%9B%86%E8%AF%81%E6%8D%AE"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">tool 1：querying - 使用工具采集证据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#prompt-2%EF%BC%9A%E5%AF%B9%E6%96%B9%E6%B3%95%E7%9A%84%E8%AF%84%E4%BC%B0"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">prompt 2：对方法的评估</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-LLM-for-Math-reasoning"><span class="toc-number">1.2.</span> <span class="toc-text">2. LLM for Math reasoning</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-In-domain-dataset"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. In-domain dataset</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#train-set-of-the-benchmarks"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">train set of the benchmarks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#data-augmentation-by-GPT-4"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">data augmentation by GPT-4</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reject-sampling"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">reject sampling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Evol-Instruct"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">Evol-Instruct</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reformat"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">reformat</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Out-domain-dataset"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. Out-domain dataset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Reward-Model"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. Reward Model</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Image2Poem"><span class="toc-number">1.3.</span> <span class="toc-text">3. Image2Poem</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/24/my_project/" title="科研经历简介"><img src="https://i.postimg.cc/7LPvy8PV/guimie.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="科研经历简介"/></a><div class="content"><a class="title" href="/2023/09/24/my_project/" title="科研经历简介">科研经历简介</a><time datetime="2023-09-24T06:02:37.000Z" title="发表于 2023-09-24 14:02:37">2023-09-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/20/PPO/" title="Proximal Policy Optimization(PPO)"><img src="https://i.postimg.cc/fyDqYY3v/shaonv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Proximal Policy Optimization(PPO)"/></a><div class="content"><a class="title" href="/2023/07/20/PPO/" title="Proximal Policy Optimization(PPO)">Proximal Policy Optimization(PPO)</a><time datetime="2023-07-20T05:24:37.000Z" title="发表于 2023-07-20 13:24:37">2023-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/28/PTH/" title="Post Tuned Hashing - A New Approach to Indexing High-dimensional Data"><img src="https://i.postimg.cc/50B32Dk7/meili.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Post Tuned Hashing - A New Approach to Indexing High-dimensional Data"/></a><div class="content"><a class="title" href="/2023/06/28/PTH/" title="Post Tuned Hashing - A New Approach to Indexing High-dimensional Data">Post Tuned Hashing - A New Approach to Indexing High-dimensional Data</a><time datetime="2023-06-28T12:45:37.000Z" title="发表于 2023-06-28 20:45:37">2023-06-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/09/NEGCUT/" title="Instance-wise Hard Negative Example Generation for Contrastive Learning in Unpaired Image-to-Image Translation"><img src="https://i.postimg.cc/RhHyTvGM/chifan.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Instance-wise Hard Negative Example Generation for Contrastive Learning in Unpaired Image-to-Image Translation"/></a><div class="content"><a class="title" href="/2023/06/09/NEGCUT/" title="Instance-wise Hard Negative Example Generation for Contrastive Learning in Unpaired Image-to-Image Translation">Instance-wise Hard Negative Example Generation for Contrastive Learning in Unpaired Image-to-Image Translation</a><time datetime="2023-06-09T06:31:37.000Z" title="发表于 2023-06-09 14:31:37">2023-06-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/09/unimatch/" title="Revisiting Weak-to-Strong Consistency in Semi-Supervised Semantic Segmentation"><img src="https://i.postimg.cc/50B32Dk7/meili.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Revisiting Weak-to-Strong Consistency in Semi-Supervised Semantic Segmentation"/></a><div class="content"><a class="title" href="/2023/06/09/unimatch/" title="Revisiting Weak-to-Strong Consistency in Semi-Supervised Semantic Segmentation">Revisiting Weak-to-Strong Consistency in Semi-Supervised Semantic Segmentation</a><time datetime="2023-06-09T06:31:37.000Z" title="发表于 2023-06-09 14:31:37">2023-06-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By weiji-Feng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script src="/js/jquery.js"></script><script src="/js/foot.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script src="/js/switch.js" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://git-calender.nickxu.top/api?weiji-Feng",['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'],'weiji-Feng')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.9},"log":false});</script></body></html>